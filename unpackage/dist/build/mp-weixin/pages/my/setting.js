(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/setting"],{4238:function(e,t,a){},"4e86":function(e,t,a){"use strict";a.r(t);var n=a("774e"),i=a("9125");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("a2e8");var s=a("828b"),o=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=o.exports},"774e":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var n=function(){var e=this.$createElement;this._self._c},i=[]},9125:function(e,t,a){"use strict";a.r(t);var n=a("abc9"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},a2e8:function(e,t,a){"use strict";var n=a("4238"),i=a.n(n);i.a},abc9:function(e,t,a){"use strict";(function(e){var n=a("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("7eb4")),r=n(a("ee10")),s=a("dcbd"),o=a("c486"),u=a("c52b"),c={data:function(){return{index:-1,picker:["喵喵喵","汪汪汪","哼唧哼唧"],region:["广东省"],radio:"C",modalName:null,textareaAValue:"",textareaBValue:"",imgUrl:"",username:"",tel:"",card:"",shippingAddress:"",rules:{username:[{rule:/^.{2,18}$/,message:"请输入姓名"}],card:[{rule:/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|18|20|30|31)\d{3}[0-9xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}$)/,message:"请输入正确的身份证"}]},noClick:!0,focusclass:{username:!1},tximg:"",date:"请选择",baseUrl:"",userInfo:null}},onLoad:function(){this.imgUrl=s.imgUrl,this.baseUrl=s.baseUrl,this.getInfos()},onShareAppMessage:function(t){var a=e.getStorageSync("userid"),n="/pages/index/index?userid="+a;return{title:"耀考证",path:n,imageUrl:this.imgUrl+"loginlogo.png"}},onShareTimeline:function(t){var a=e.getStorageSync("userid"),n="/pages/index/index?userid="+a;return{title:"耀考证",path:n,imageUrl:this.imgUrl+"loginlogo.png"}},methods:{getMyEdits:function(){var e=this;return(0,r.default)(i.default.mark((function t(){var a,n,r;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={name:e.username,card:e.card,profilePicture:e.tximg?e.tximg:"",sex:"C"==e.radio?"男":"女",shippingAddress:e.shippingAddress,birthday:e.date},t.next=4,(0,o.getMyEdit)(a);case 4:n=t.sent,r=n.data,200==r.code?(e.$api.msg("保存成功"),e.getInfos()):(console.log(r),e.$api.msg(r.msg)),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getInfos:function(e){var t=this;return(0,r.default)(i.default.mark((function e(){var a,n,r;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={},e.next=4,(0,u.getInfo)(a);case 4:n=e.sent,r=n.data,200==r.code?(t.userInfo=r.data,t.username=r.data.name?r.data.name:"",t.tel=r.data.tel?r.data.tel:"",t.card=r.data.card?r.data.card:"",t.radio="男"==r.data.sex?"C":"D",t.shippingAddress=r.data.shippingAddress?r.data.shippingAddress:"",t.tximg=r.data.profilePicture?r.data.profilePicture:"",t.date=r.data.birthday):(console.log(r),t.$api.msg(r.msg)),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()},RadioChange:function(e){this.radio=e.detail.value},DateChange:function(e){this.date=e.detail.value},onChooseAvatar:function(t){var a=this,n=t.detail.avatarUrl;e.showLoading({title:"加载中"}),e.uploadFile({url:s.baseUrl+"/hs/api/upload",filePath:n,name:"file",header:{token:e.getStorageSync("token")},success:function(e){var t=JSON.parse(e.data);200===t.code&&(a.tximg=t.fileName)},fail:function(t){e.showToast({title:t,duration:2e3})},complete:function(){e.hideLoading()}})},ViewImage:function(t){e.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},ChooseImage:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){0!=t.imgList.length?t.imgList=t.imgList.concat(e.tempFilePaths):t.imgList=e.tempFilePaths}})},submit:function(){var e=this;if(console.log(e.card),e.noClick){if(e.noClick=!1,e.card&&!e.validate("card"))return;if(!e.validate("username"))return;console.log("已经提交"),setTimeout((function(){e.noClick=!0}),1e3),this.getMyEdits()}else this.$api.msg("已提交请勿重复点击")},validate:function(t){var a=this,n=!0;return this.rules[t].forEach((function(i){if(!i.rule.test(a[t]))return e.showToast({title:i.message,icon:"none"}),n=!1,!1})),n},blur:function(e){this.focusclass[e]=!1}}};t.default=c}).call(this,a("df3c")["default"])},b833:function(e,t,a){"use strict";(function(e,t){var n=a("47a9");a("1212");n(a("3240"));var i=n(a("4e86"));e.__webpack_require_UNI_MP_PLUGIN__=a,t(i.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])}},[["b833","common/runtime","common/vendor"]]]);