(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mychildren/dingdan_detail"],{"202b":function(t,e,a){"use strict";(function(t){var n=a("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("7eb4")),o=n(a("ee10")),r=a("dcbd"),d=a("c486"),s={data:function(){return{pagenone:!0,currentIndex:-1,liulan:!1,sid:"",tuijianmas:!1,tuijianma:"",shadow:!1,modalName:"",modalName1:"",modalName2:"",xzTabCur:null,xzid:"",imgUrl:"",dddetail:"",fpdetail:"",baseUrl:"",TabCur:"",orderType:"",url:"https://www.rzjswy.cn/faceindex.html",tableData:[{name:"智能手机",category:"1000",stock:"待支付"},{name:"运动鞋",category:"122",stock:"未支付"}]}},onLoad:function(t){this.imgUrl=r.imgUrl,this.baseUrl=r.baseUrl,this.sid=t.sid,this.TabCur=t.TabCur,this.orderType=t.orderType},onShareAppMessage:function(e){var a=t.getStorageSync("userid"),n="/pages/index/index?userid="+a;return{title:"耀考证",path:n,imageUrl:this.imgUrl+"loginlogo.png"}},onShareTimeline:function(e){var a=t.getStorageSync("userid"),n="/pages/index/index?userid="+a;return{title:"耀考证",path:n,imageUrl:this.imgUrl+"loginlogo.png"}},onShow:function(){this.getdetail(),this.getkaquan()},methods:{showModal:function(t){this.modalName=t.currentTarget.dataset.target,this.pagenone=!1},showModal1:function(t){this.modalName1=t.currentTarget.dataset.target,this.pagenone=!1},showModal2:function(t){this.modalName2=t.currentTarget.dataset.target,this.pagenone=!1},openTxtFile:function(e){var a=this.dddetail,n="https://www.rzjswy.cn"+e;console.log(n),t.downloadFile({url:n,success:function(e){t.hideLoading();var n=e.tempFilePath;console.log(n),t.openDocument({filePath:n,success:function(e){console.log("打开文档成功"),t.setStorageSync("liulan",!0),t.setStorageSync("thisid",a.id)},fail:function(){t.showToast({title:"暂不支持此类型",duration:2e3,icon:"none"})}})},fail:function(){t.hideLoading()}})},goqianming:function(){this.liulan?this.$api.toPage("chooseSchool/qianming?sid="+this.dddetail.id):t.showToast({title:"请先浏览合同",duration:2e3,icon:"none"})},hideModal:function(t){this.modalName=null,this.modalName1=null,this.modalName2=null,this.pagenone=!0,console.log(this.pagenone)},hideModal1:function(t){this.modalName=null,this.xzTabCur="",this.xzid=""},SetShadow:function(){this.shadow=!this.shadow,0==this.shadow&&(this.tuijianma="",this.goGetUpReferralCode())},quxiaoyouhui:function(){this.xzid="",this.xzTabCur="",this.hideModal1(),this.getyouhui()},gofapiao:function(t,e){var a=this;return(0,o.default)(i.default.mark((function n(){var o,r,s,u,c,l;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=a.dddetail.shoppingVos.map((function(t){return Number(t.actualPayment)})),r=o.reduce((function(t,e){return t+e}),0),s=r.toFixed(2),a,n.prev=4,u={sourceId:t,orderType:e},n.next=8,(0,d.getZcInvoice)(u);case 8:c=n.sent,l=c.data,200==l.code?""!=l.data?a.$api.toPage("invoice/lookinvoice?fapiaodetail="+encodeURIComponent(JSON.stringify(l.data))+"&jg="+s+"&orderType"+e):a.$api.toPage("invoice/sqinvoice?id="+t+"&orderType="+e+"&jg="+s):console.log(l),n.next=15;break;case 13:n.prev=13,n.t0=n["catch"](4);case 15:case"end":return n.stop()}}),n,null,[[4,13]])})))()},getyouhui:function(){var t=this;return(0,o.default)(i.default.mark((function e(){var a,n,o,r,s;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.prev=1,n={id:a.xzid,signUpId:a.dddetail.id},e.next=5,(0,d.getAppCouponList)(n);case 5:if(o=e.sent,r=o.data,200==r.code){if(r.data){if(a.dddetail=r.data,a.tuijianma=r.data.tjhm,r.data.yhqId)for(s=0;s<a.fpdetail.length;s++)a.fpdetail[s].id==r.data.yhqId&&(a.xzTabCur=s);else a.xzTabCur=null;a.tuijianma=r.data.tjhm,a.hideModal()}}else t.$api.msg(r.msg);e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](1);case 12:case"end":return e.stop()}}),e,null,[[1,10]])})))()},quxiaotuijian:function(){this.tuijianma="",this.tuijianmas=!1,this.goGetUpReferralCode()},goGetUpReferralCode:function(){var t=this;return(0,o.default)(i.default.mark((function e(){var a,n,o,r;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.prev=1,n={sourceId:a.sid,referralCode:a.tuijianma?a.tuijianma:"0"},e.next=5,(0,d.getorderUpBmDk)(n);case 5:o=e.sent,r=o.data,200==r.code?r.data&&(t.dddetail.tjje=r.data.tjje,t.heji=r.data.jg,t.tuijianma?t.tuijianmas=!0:t.tuijianmas=!1,t.hideModal()):(t.tuijianmas=!1,t.$api.msg(r.msg)),e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](1);case 12:case"end":return e.stop()}}),e,null,[[1,10]])})))()},getdetail:function(){var e=this;return(0,o.default)(i.default.mark((function a(){var n,o,r,s,u,c;return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e,a.prev=1,o={id:n.sid},a.next=5,(0,d.getorderBmInfo)(o);case 5:if(r=a.sent,s=r.data,200==s.code){if(e.dddetail=s.data,e.shadow=s.data.tj,u=t.getStorageSync("thisid"),u==s.data.id?e.liulan=t.getStorageSync("liulan"):(t.setStorageSync("liulan",!1),t.setStorageSync("thisid","")),s.data.yhqId)for(c=0;c<n.fpdetail.length;c++)n.fpdetail[c].id==s.data.yhqId&&(n.xzTabCur=c);else n.xzTabCur=null;s.data.tjhm&&(n.tuijianmas=!0,n.tuijianma=s.data.tjhm)}else console.log(s);a.next=12;break;case 10:a.prev=10,a.t0=a["catch"](1);case 12:case"end":return a.stop()}}),a,null,[[1,10]])})))()},getkaquan:function(){var t=this;return(0,o.default)(i.default.mark((function e(){var a,n,o,r,s;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.prev=1,n={},e.next=5,(0,d.getoderYhqlist)(n);case 5:if(o=e.sent,r=o.data,200==r.code)for(a.fpdetail=r.data,s=0;s<r.data.length;s++)"1"==r.data[s].type&&(a.xzTabCur=s);else t.$api.msg(r.msg);e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](1);case 12:case"end":return e.stop()}}),e,null,[[1,10]])})))()},goPay:function(){var e=this;return(0,o.default)(i.default.mark((function a(){var n,o,r,s;return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e,!(n.dddetail.jg<0)){a.next=4;break}return t.showToast({title:"优惠券跟推荐优惠不能小于0",icon:"none"}),a.abrupt("return");case 4:if(n.dddetail.contractSign){a.next=7;break}return t.showToast({title:"请签名",icon:"none"}),a.abrupt("return");case 7:if("认证通过"==n.dddetail.rl){a.next=10;break}return t.showToast({title:"请人脸认证",icon:"none"}),a.abrupt("return");case 10:return a.prev=10,o={id:n.sid},a.next=14,(0,d.getorderPay)(o);case 14:r=a.sent,s=r.data,200==s.code?(e.pay_info=s.data,e.wxPay()):e.$api.msg(s.msg),a.next=21;break;case 19:a.prev=19,a.t0=a["catch"](10);case 21:case"end":return a.stop()}}),a,null,[[10,19]])})))()},wxPay:function(){var e=JSON.parse(decodeURIComponent(this.pay_info));t.requestPayment({appId:e.appId,provider:"wxpay",timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(e){setTimeout((function(){t.showToast({title:"支付成功",icon:"none"}),setTimeout((function(){t.navigateBack({delta:1})}),500)}),500)},fail:function(e){console.log(e),t.showToast({title:"支付失败",icon:"none"})}})},handleRowClick:function(t){this.currentIndex=t,console.log("当前选中行：",this.tableData[t])},toExecute:function(){t.navigateTo({url:"/pages/chooseSchool/goH5?url="+this.url+"&id="+this.dddetail.id})},xuanzhong:function(t){this.xzTabCur=t.currentTarget.dataset.id,this.xzid=this.fpdetail[t.currentTarget.dataset.id].id},tokaquan:function(){t.navigateTo({url:"/pages/my/kaquan?signUpId="+this.dddetail.id})}}};e.default=s}).call(this,a("df3c")["default"])},3641:function(t,e,a){},"365c":function(t,e,a){"use strict";a.r(e);var n=a("202b"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"6e7c":function(t,e,a){"use strict";(function(t,e){var n=a("47a9");a("1212");n(a("3240"));var i=n(a("e379"));t.__webpack_require_UNI_MP_PLUGIN__=a,e(i.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},"7b04":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},i=[]},e379:function(t,e,a){"use strict";a.r(e);var n=a("7b04"),i=a("365c");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("f97b");var r=a("828b"),d=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=d.exports},f97b:function(t,e,a){"use strict";var n=a("3641"),i=a.n(n);i.a}},[["6e7c","common/runtime","common/vendor"]]]);