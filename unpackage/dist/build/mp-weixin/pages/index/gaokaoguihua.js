(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/gaokaoguihua"],{"1a10":function(e,t,a){"use strict";(function(e){var i=a("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("7eb4")),s=i(a("ee10")),c=a("dcbd"),r=a("c52b"),o={data:function(){return{fwindex:0,lastname:"",tuijianmas:!1,tuijianma:"",resultString:"",cityName:"",cityid:"",index:-1,gkindex:-1,picker:["喵喵喵","汪汪汪","哼唧哼唧"],region:["广东省"],radio:"C",imgList:"",modalName:null,imgUrl:"",baseUrl:"",name:"",gkzf:"",wc:"",dkcj:"",shengao:"",lastid:"",lasttext:"",ancestors:"",rules:{gkzf:[{rule:/^.{2,18}$/,message:"请输入高考总分"}],wc:[{rule:/^.{1,18}$/,message:"请输入位次"}],name:[{rule:/^.{2,18}$/,message:"请输入姓名"}],shengao:[{rule:/^.{2,18}$/,message:"请输入身高"}],dkcj:[{rule:/^.{2,18}$/,message:"请输入单科成绩"}]},noClick:!0,indexid:"",gkid:"",indexs:"",zfitem:"",focusclass:{username:!1},cityList:[],CustomBar:this.CustomBar,onexl:[],sid:"",jg:0,checkbox:[{value:0,name:"物理",checked:!1,hot:!1},{value:1,name:"化学",checked:!1,hot:!1},{value:2,name:"生物",checked:!1,hot:!0},{value:3,name:"历史",checked:!1,hot:!0},{value:4,name:"政治",checked:!1,hot:!1},{value:5,name:"地理",checked:!1,hot:!1}]}},onLoad:function(e){this.imgUrl=c.imgUrl,this.baseUrl=c.baseUrl,this.sid=e.sid,console.log(e.jg),this.getCityLists(),this.getSxlistXuezhi(e.sid),this.getVoluntaryTestinfos()},onShareAppMessage:function(t){var a=e.getStorageSync("userid"),i="/pages/index/index?userid="+a;return{title:"耀考证",path:i,imageUrl:this.imgUrl+"loginlogo.png"}},onShareTimeline:function(t){var a=e.getStorageSync("userid"),i="/pages/index/index?userid="+a;return{title:"耀考证",path:i,imageUrl:this.imgUrl+"loginlogo.png"}},methods:{getVoluntaryTestinfos:function(){var e=this;return(0,s.default)(n.default.mark((function t(){var a,i,s,c,o,l;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e,t.prev=1,a={},t.next=5,(0,r.getVoluntaryTestinfo)(a);case 5:if(i=t.sent,s=i.data,200==s.code){if(s.data){for(e.cityid=s.data.cityId,e.cityName=s.data.cityName,e.resultStringe=s.data.subject,e.gkzf=s.data.fraction,e.wc=s.data.place,e.name=s.data.name,e.radio="男"==s.data.sex?"C":"D",e.shengao=s.data.height,e.dkcj=s.data.singleSubjectScore,e.imgList=s.data.transcript,e.gkid=s.data.id,e.ancestors=s.data.ancestors,c=0;c<e.cityList.length;c++)e.cityList[c].nodeCode==s.data.cityId&&(e.gkindex=c);for(o=s.data.subject.split(","),c=0;c<e.checkbox.length;c++)for(l=0;l<o.length;l++)e.checkbox[c].name==o[l]&&(e.checkbox[c].checked=!0);e.onexl=s.data.jhLists,e.lastname=s.data.jhLists[s.data.jhLists.length-1].list[s.data.jhLists[s.data.jhLists.length-1].value].ancestors,e.lastid=s.data.jhLists[s.data.jhLists.length-1].list[s.data.jhLists[s.data.jhLists.length-1].value].id,e.lasttext=s.data.jhLists[s.data.jhLists.length-1].list[s.data.jhLists[s.data.jhLists.length-1].value].deptName}}else e.tuijianmas=!1,e.$api.msg(s.msg);t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})))()},qxGetUpReferralCode:function(){this.tuijianma="",this.tuijianmas=!1,this.goGetUpReferralCode()},goGetUpReferralCode:function(){var e=this;return(0,s.default)(n.default.mark((function t(){var a,i,s,c;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.prev=1,i={id:a.sid,referralCode:a.tuijianma?a.tuijianma:"0"},t.next=5,(0,r.getzgUpReferralCode)(i);case 5:s=t.sent,c=s.data,200==c.code?c.data&&(e.yhje=c.data.referralPrice,e.heji=c.data.actualPayment,e.tuijianma=c.data.referralCode,e.tuijianma?e.tuijianmas=!0:e.tuijianmas=!1,e.hideModal()):(e.tuijianmas=!1,e.$api.msg(c.msg)),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})))()},getSxlistXuezhi:function(e){var t=this;return(0,s.default)(n.default.mark((function a(){var i,s,c;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,i={id:e,type:0},a.next=4,(0,r.getXlType)(i);case 4:s=a.sent,c=s.data,200==c.code&&(c.data.length?(t.onexl.push({value:"",list:c.data}),t.lastid="",t.lasttext=""):t.jg=c.data),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:case"end":return a.stop()}}),a,null,[[0,9]])})))()},RadioChange:function(e){this.radio=e.detail.value},showModal:function(e){this.modalName="Modal"},hideModal:function(e){this.modalName=null},ChooseCheckbox:function(e){var t=this.checkbox,a=e.currentTarget.dataset.value,i=this.checkbox.filter((function(e){return e.checked}));if(i.length<3){for(var n=0,s=t.length;n<s;++n)if(t[n].value==a){t[n].checked=!t[n].checked;break}}else this.$api.msg("最多只可选择3个科目")},gkPickerChange:function(e){this.gkindex=e.detail.value,this.cityName=this.cityList[e.detail.value].nodeName,this.cityid=this.cityList[e.detail.value].nodeCode,console.log(this.cityName)},wcPickerChange:function(e){this.wcindex=e.detail.value},gopay:function(){var e=this.checkbox.filter((function(e){return e.checked})),t=e.map((function(e){return e.name})),a=t.join(",");e.length<3?this.$api.msg("请至少选择3个科目"):(this.resultString=a,console.log(a),this.submit())},gosubmit:function(){var e=this;return(0,s.default)(n.default.mark((function t(){var a,i,s;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={id:e.gkid,cityId:e.cityid,cityName:e.cityName,subject:e.resultString,fraction:e.gkzf,place:e.wc,name:e.name,sex:"C"==e.radio?"男":"女",height:e.shengao,careerPath:"",singleSubjectScore:e.dkcj,transcript:e.imgList,serviceClassId:e.lastid,serviceClass:e.lasttext,allSubject:e.lastname,referralCode:e.tuijianma?e.tuijianma:""},t.next=4,(0,r.getVoluntaryTestadd)(a);case 4:i=t.sent,s=i.data,200==s.code?e.submitPay(s.msg):(console.log(s),e.$api.msg(s.msg)),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},submitPay:function(e){var t=this;return(0,s.default)(n.default.mark((function a(){var i,s,c;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t,a.prev=1,i={id:e},a.next=5,(0,r.getMiniAppPay)(i);case 5:s=a.sent,c=s.data,200==c.code?(t.zfitem=c.data,t.pay_info=c.data,t.wxPay()):t.$api.msg(c.msg),a.next=12;break;case 10:a.prev=10,a.t0=a["catch"](1);case 12:case"end":return a.stop()}}),a,null,[[1,10]])})))()},wxPay:function(){var t=JSON.parse(decodeURIComponent(this.zfitem));console.log(t),e.requestPayment({appId:t.appId,provider:"wxpay",timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,success:function(t){setTimeout((function(){e.$emit("isshow",!0),e.navigateBack({delta:1})}),500)},fail:function(t){console.log(t),e.showToast({title:"支付失败",icon:"none"})}})},getCityLists:function(){var e=this;return(0,s.default)(n.default.mark((function t(){var a,i,s;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},t.next=4,(0,r.getCityList)(a);case 4:i=t.sent,s=i.data,200==s.code?s.data&&(e.cityList=s.data):(console.log(s),e.$api.msg(s.msg)),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},ViewImage:function(t){e.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},ChooseImage:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(a){var i=a.tempFilePaths[0];e.uploadFile({url:c.baseUrl+"/hs/api/upload",filePath:i,name:"file",formData:{token:e.getStorageSync("token")},success:function(a){var i=JSON.parse(a.data);200==i.code?t.imgList=i.fileName:e.showToast({title:i.msg,icon:"none"})},fail:function(e){console.log(e)}})}})},DelImg:function(t){var a=this;e.showModal({title:"召唤师",content:"确定要删除这段回忆吗？",cancelText:"再看看",confirmText:"再见",success:function(e){e.confirm&&(a.imgList="")}})},PickerChange:function(e){this.index=e.detail.value},PickerChangefw:function(e,t,a){a+1!==this.onexl.length&&this.onexl.splice(a+1),this.onexl[a].value=e.detail.value,this.indexs=t.list[t.value].deptName,this.indexid=t.list[t.value].id,this.lastid=t.list[t.value].id,this.lasttext=t.list[t.value].deptName,this.lastname=t.list[t.value].ancestors,console.log(this.lastname),this.getSxlistXuezhi(this.indexid)},submit:function(){var t=this;if(t.noClick){if(t.noClick=!1,setTimeout((function(){t.noClick=!0}),2e3),!t.validate("gkzf"))return;if(!t.validate("wc"))return;if(!t.validate("name"))return;if(!t.validate("shengao"))return;if(!t.validate("dkcj"))return;if(!t.cityName)return void e.showToast({title:"请选择高考省份",icon:"none"});if(!t.lasttext)return void e.showToast({title:"请选择服务办类型",icon:"none"});if(!t.imgList)return void e.showToast({title:"请上传成绩单",icon:"none"});this.showModal(),console.log("已经提交")}else this.$api.msg("已提交请勿重复点击")},validate:function(t){var a=this,i=!0;return this.rules[t].forEach((function(n){if(!n.rule.test(a[t]))return e.showToast({title:n.message,icon:"none"}),i=!1,!1})),i},blur:function(e){this.focusclass[e]=!1}}};t.default=o}).call(this,a("df3c")["default"])},"26fc":function(e,t,a){},"361f":function(e,t,a){"use strict";var i=a("26fc"),n=a.n(i);n.a},"50a0":function(e,t,a){"use strict";a.r(t);var i=a("a6e9"),n=a("cb11");for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("361f");var c=a("828b"),r=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=r.exports},6988:function(e,t,a){"use strict";(function(e,t){var i=a("47a9");a("1212");i(a("3240"));var n=i(a("50a0"));e.__webpack_require_UNI_MP_PLUGIN__=a,t(n.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},a6e9:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var i=function(){var e=this.$createElement;this._self._c},n=[]},cb11:function(e,t,a){"use strict";a.r(t);var i=a("1a10"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a}},[["6988","common/runtime","common/vendor"]]]);