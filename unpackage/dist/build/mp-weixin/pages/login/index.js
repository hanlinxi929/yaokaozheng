(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/index"],{"258f":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},a=[]},"57c4":function(e,n,t){"use strict";t.r(n);var o=t("258f"),a=t("de4b");for(var c in a)["default"].indexOf(c)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(c);t("accd");var i=t("828b"),r=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=r.exports},8673:function(e,n,t){},accd:function(e,n,t){"use strict";var o=t("8673"),a=t.n(o);a.a},b542:function(n,t,o){"use strict";(function(n){var a=o("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(o("7eb4")),i=a(o("ee10")),r=o("adbf"),u=o("dcbd"),s={data:function(){return{noClick:!0,codeOne:"",agreementFlag:!1,userInfo:{avatar:"",name:""},loginPop:"",modalName:null,imgUrl:"",userid:n.getStorageSync("sjuserid")}},onLoad:function(e){this.imgUrl=u.imgUrl},methods:{showModal:function(e){this.modalName=e.currentTarget.dataset.target},hideModal:function(e){this.modalName=null},agreementClick:function(){this.agreementFlag=!this.agreementFlag},loginClick:function(){n.showToast({title:"请勾选协议",icon:"none",duration:2e3})},onChooseAvatar:function(e){console.log("选择头像",e),this.userInfo.avatar=e.detail.avatarUrl,uploadAvatar(userInfo.avatar).then((function(e){console.log("头像上传成功",e)})).catch((function(e){console.error("上传失败",e)}))},onInputChange:function(){console.log("名字",e),this.userInfo.name=e.detail.value},refuseClick:function(){loginPop.close()},privacyClick:function(){n.downloadFile({url:"https://www.lncjhs.cn/annex/ysxy.pdf",success:function(e){var t=e.tempFilePath;n.openDocument({filePath:t,showMenu:!0,success:function(e){console.log("打开文档成功")}})}})},serveClick:function(){n.downloadFile({url:"https://www.lncjhs.cn/annex/yhxy.pdf",success:function(e){var t=e.tempFilePath;n.openDocument({filePath:t,showMenu:!0,success:function(e){console.log("打开文档成功")}})}})},toIndex:function(){n.switchTab({url:"/pages/index/index"})},toLogin:function(){var e=this;this.noClick?(this.noClick=!1,n.login({provider:"weixin",success:function(n){e.gettoLogin(n.code),e.codeOne=n.code}})):this.$api.msg("请勿重复点击")},gettoLogin:function(e){var t=this;return(0,i.default)(c.default.mark((function o(){var a,i,u;return c.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,a={code:e},o.next=4,(0,r.toLogin)(a);case 4:i=o.sent,u=i.data,200==u.code?(n.setStorageSync("userid",u.id),console.log("登录成功"),setTimeout((function(){n.navigateBack()}),500)):(console.log(u),t.$api.msg(u.msg)),o.next=11;break;case 9:o.prev=9,o.t0=o["catch"](0);case 11:case"end":return o.stop()}}),o,null,[[0,9]])})))()},getPhoneNumber:function(e){"getPhoneNumber:fail user deny"==e.detail.errMsg?n.showToast({title:"您拒绝了绑定手机号",icon:"none",duration:2e3}):this.getPhone(e)},getPhone:function(e){var t=this;return(0,i.default)(c.default.mark((function o(){var a;return c.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a=t,a=t,a.noClick?(a.noClick=!1,n.login({provider:"weixin",success:function(n){t.gophone(e,n.code)}})):a.$api.msg("请勿重复点击");case 3:case"end":return o.stop()}}),o)})))()},gophone:function(e,t){var o=this;return(0,i.default)(c.default.mark((function a(){var i,u,s;return c.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,i={code:t},a.next=4,(0,r.toLogin)(i);case 4:u=a.sent,s=u.data,200==s.code?(console.log("登录成功"),n.setStorageSync("token",s.token),n.setStorageSync("phone",s.phone),s.id&&n.setStorageSync("userid",s.id),setTimeout((function(){n.navigateBack({delta:1})}),500)):o.getcode(e),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:case"end":return a.stop()}}),a,null,[[0,9]])})))()},getcode:function(e){var t=this;n.login({provider:"weixin",success:function(n){t.gettophone(e,n.code)}})},gettophone:function(e,t){var o=this;return(0,i.default)(c.default.mark((function a(){var i,u,s;return c.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,i={code:e.detail.code,lgcode:t,inviterId:n.getStorageSync("sjuserid")},a.next=4,(0,r.toRegister)(i);case 4:u=a.sent,s=u.data,200==s.code?(console.log(s),n.setStorageSync("token",s.token),n.setStorageSync("phone",s.phone),n.setStorageSync("userid",s.id),setTimeout((function(){n.navigateBack({delta:1})}),500)):(console.log(s),o.$api.msg(s.msg)),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:case"end":return a.stop()}}),a,null,[[0,9]])})))()}}};t.default=s}).call(this,o("df3c")["default"])},d61a:function(e,n,t){"use strict";(function(e,n){var o=t("47a9");t("1212");o(t("3240"));var a=o(t("57c4"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(a.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},de4b:function(e,n,t){"use strict";t.r(n);var o=t("b542"),a=t.n(o);for(var c in o)["default"].indexOf(c)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(c);n["default"]=a.a}},[["d61a","common/runtime","common/vendor"]]]);